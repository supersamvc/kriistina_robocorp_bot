# ü§ñ Kriistina Robocorp Bot

> –ü—Ä–µ–≤—Ä–∞—â–∞–π—Ç–µ –ª—é–±—É—é –∏–¥–µ—é (–≥–æ–ª–æ—Å, —Ç–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫—É) –≤ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–π –ø–æ—Å—Ç, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –≤–∞—à–∏–º –∞–≤—Ç–æ—Ä—Å–∫–∏–º —Å—Ç–∏–ª–µ–º –∑–∞ —Å—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–µ–∫—É–Ω–¥—ã.

## üöÄ **–°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê: PRODUCTION READY** ‚úÖ

### üåê **–î–µ–π—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:**
- **üì± Mini Web App**: [https://kriistina.netlify.app](https://kriistina.netlify.app) ‚úÖ
- **üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Supabase (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç) ‚úÖ
- **ü§ñ Telegram Bot**: –ù–∞—Å—Ç—Ä–æ–µ–Ω, —Ç–æ–∫–µ–Ω –∞–∫—Ç–∏–≤–µ–Ω ‚úÖ
- **‚òÅÔ∏è AWS Lambda**: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚úÖ
- **üß† OpenAI**: API –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

### üìã **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:**
- ‚úÖ **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∏–ª—è –ø–∏—Å—å–º–∞
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π** –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Supabase
- ‚úÖ **Telegram Web App –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- ‚úÖ **–£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** (–±—Ä–∞—É–∑–µ—Ä vs Telegram)
- ‚úÖ **Production –¥–µ–ø–ª–æ–π** –Ω–∞ Netlify —Å HTTPS

### üîó **–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø:**
- **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: https://kriistina.netlify.app
- **Admin –ø–∞–Ω–µ–ª—å Netlify**: https://app.netlify.com/projects/kriistina
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: —Å–º. —Ä–∞–∑–¥–µ–ª—ã –Ω–∏–∂–µ

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

Kriistina Bot ‚Äî —ç—Ç–æ AI-—Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π:

1. **–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∞–≤—Ç–æ—Ä—Å–∫–∏–π —Å—Ç–∏–ª—å** –∏–∑ 10‚Äì15 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–ü—Ä–∏–º–µ–Ω—è–µ—Ç —ç—Ç–æ—Ç —Å—Ç–∏–ª—å** –∫ –Ω–æ–≤—ã–º –≤—Ö–æ–¥—è—â–∏–º –¥–∞–Ω–Ω—ã–º (–≥–æ–ª–æ—Å, —Ç–µ–∫—Å—Ç, URL)
3. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –ø–æ—Å—Ç—ã** –≤ Markdown V2 –¥–ª—è Telegram
4. **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Mini Web App** –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è —Å—Ç–∏–ª—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    A[Telegram Bot] --> B[API Gateway]
    B --> C[Lambda Webhook]
    C --> D[Step Functions]
    D --> E[Lambda STT]
    D --> F[Lambda Generator]
    D --> G[SQS Queue]
    G --> H[Lambda Sender]
    H --> A
    
    E --> I[OpenAI Whisper]
    F --> J[OpenAI GPT-4o]
    F --> K[Supabase DB]
    
    L[Mini Web App] --> K
```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: AWS Lambda (Python 3.12), Step Functions, SQS, S3
- **Database**: Supabase (PostgreSQL) —Å Row Level Security
- **AI Services**: OpenAI GPT-4o, OpenAI Whisper
- **Frontend**: React 18 + TypeScript, Telegram Web App SDK
- **Infrastructure**: AWS SAM, CloudFormation

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- AWS CLI –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ credentials
- AWS SAM CLI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- Node.js 18+ –¥–ª—è Mini Web App
- Telegram Bot Token
- OpenAI API Key
- Supabase –ø—Ä–æ–µ–∫—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone <repository-url>
cd kriistina_robocorp_bot
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ Supabase –ø—Ä–æ–µ–∫—Ç–∞

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [supabase.com](https://supabase.com) –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Supabase CLI
npm install -g supabase

# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ø—Ä–æ–µ–∫—Ç—É
supabase link --project-ref <your-project-ref>

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
supabase db push
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AWS Secrets Manager

–°–æ–∑–¥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ AWS Secrets Manager:

```bash
aws secretsmanager create-secret \
  --name "TELEGRAM_BOT_TOKEN" \
  --secret-string "YOUR_TELEGRAM_BOT_TOKEN"

aws secretsmanager create-secret \
  --name "OPENAI_API_KEY" \
  --secret-string "YOUR_OPENAI_API_KEY"

aws secretsmanager create-secret \
  --name "SUPABASE_API_KEY" \
  --secret-string "YOUR_SUPABASE_API_KEY"
```

### 4. –î–µ–ø–ª–æ–π Lambda —Ñ—É–Ω–∫—Ü–∏–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
cd src/lambda/webhook && pip install -r requirements.txt && cd ../../..
cd src/lambda/sender && pip install -r requirements.txt && cd ../../..
cd src/lambda/stt && pip install -r requirements.txt && cd ../../..
cd src/lambda/generator && pip install -r requirements.txt && cd ../../..

# –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ SAM
sam build
sam deploy --guided
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `Environment`: dev –∏–ª–∏ prod
- `TelegramBotToken`: –≤–∞—à —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `OpenAIAPIKey`: –≤–∞—à –∫–ª—é—á OpenAI API
- `SupabaseURL`: URL –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞
- `SupabaseAPIKey`: anon/public –∫–ª—é—á Supabase

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram webhook

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–ª—É—á–∏—Ç–µ URL webhook –∏–∑ outputs –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ:

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://<your-api-gateway-url>/webhook/<bot-token-prefix>"}'
```

### 6. Mini Web App (–ì–û–¢–û–í–û ‚úÖ)

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç**: https://kriistina.netlify.app

#### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
cd webapp

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
npm start
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
```

#### –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ–ø–ª–æ—è:
```bash
cd webapp

# –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥
# –ó–∞—Ç–µ–º –¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ Netlify
npx netlify deploy --prod

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ https://kriistina.netlify.app
```

#### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã):
```bash
REACT_APP_SUPABASE_URL=https://tucxcwjbexxdepgfzyif.supabase.co
REACT_APP_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ù–ê–°–¢–†–û–ï–ù–´ ‚úÖ)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------------|----------|---------|----------|
| `TELEGRAM_BOT_TOKEN` | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ | ‚úÖ | `8105929696:AAG...` |
| `OPENAI_API_KEY` | –ö–ª—é—á OpenAI API | ‚úÖ | `sk-proj-CpVn...` |
| `SUPABASE_URL` | URL Supabase –ø—Ä–æ–µ–∫—Ç–∞ | ‚úÖ | `https://tucxcwjbexxdepgfzyif.supabase.co` |
| `SUPABASE_API_KEY` | Service role –∫–ª—é—á Supabase | ‚úÖ | `eyJhbGciOiJI...` |
| `CONTENT_BUCKET_NAME` | –ò–º—è S3 bucket –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ | ‚úÖ | –ù–∞—Å—Ç—Ä–æ–µ–Ω –≤ AWS |

#### Mini Web App –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------------|----------|---------|----------|
| `REACT_APP_SUPABASE_URL` | URL Supabase –¥–ª—è frontend | ‚úÖ | `https://tucxcwjbexxdepgfzyif.supabase.co` |
| `REACT_APP_SUPABASE_ANON_KEY` | Anon –∫–ª—é—á –¥–ª—è frontend | ‚úÖ | `eyJhbGciOiJI...` |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ (–ù–ê–°–¢–†–û–ï–ù ‚úÖ)

**Telegram Bot —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: @your_bot_name (—Ç–æ–∫–µ–Ω –∞–∫—Ç–∏–≤–µ–Ω)

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Mini Web App –∫ –±–æ—Ç—É:

1. **–ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Menu Button —á–µ—Ä–µ–∑ @BotFather:**
   ```
   /setmenubutton
   Text: üé® –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∏–ª—å
   URL: https://kriistina.netlify.app
   ```

3. **–ò–ª–∏ —á–µ—Ä–µ–∑ API:**
   ```bash
   curl -X POST "https://api.telegram.org/bot8105929696:AAGQbE5O9QZBI7a87yfmImNcgoyJd9FzaaA/setChatMenuButton" \
     -H "Content-Type: application/json" \
     -d '{
       "menu_button": {
         "type": "web_app",
         "text": "üé® –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∏–ª—å",
         "web_app": {
           "url": "https://kriistina.netlify.app"
         }
       }
     }'
   ```

#### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã):
```json
{
  "commands": [
    {"command": "start", "description": "üöÄ –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É"},
    {"command": "mystyle", "description": "üé® –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∏–ª—å –ø–∏—Å—å–º–∞"},
    {"command": "help", "description": "‚ùì –ü–æ–º–æ—â—å"}
  ]
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### CloudWatch Metrics

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏:

- `ProcessingLatency` - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- `ErrorRate` - —á–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫
- `ActiveUsers` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –õ–æ–≥–∏

–í—Å–µ Lambda —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∏—à—É—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤ CloudWatch:

```python
logger.info(f"Processing request for user {user_id}")
logger.error(f"Error processing audio: {error}")
```

### –ê–ª–µ—Ä—Ç—ã

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ CloudWatch –∞–ª–µ—Ä—Ç—ã –¥–ª—è:
- –í—ã—Å–æ–∫–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (>60 —Å–µ–∫)
- –û—à–∏–±–∫–∏ –≤ Lambda —Ñ—É–Ω–∫—Ü–∏—è—Ö
- –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å DLQ

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security (RLS)

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã Supabase –∑–∞—â–∏—â–µ–Ω—ã RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏:

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
create policy "Users can view own styles"
    on public.user_styles for select
    using (auth.uid()::bigint = user_id);
```

### –°–µ–∫—Ä–µ—Ç—ã

- –í—Å–µ API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ AWS Secrets Manager
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏–Ω—Ü–∏–ø –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –¥–ª—è IAM —Ä–æ–ª–µ–π
- HTTPS/TLS 1.3 –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### üöÄ **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:**
**–û—Ç–∫—Ä–æ–π—Ç–µ**: https://kriistina.netlify.app

#### –í –±—Ä–∞—É–∑–µ—Ä–µ:
- ‚úÖ **–î–µ–º–æ-—Ä–µ–∂–∏–º** - –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å—Ç–∏–ª—è** - –≤—Å–µ –æ–ø—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É** - –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Supabase
- üåê –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–Ω–Ω–µ—Ä —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –æ—Ç–∫—Ä—ã—Ç—å –≤ Telegram

#### –í Telegram (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Menu Button):
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** –±–µ–∑ –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞
- ‚úÖ **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã Telegram –±–æ—Ç–∞

1. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** - –±–æ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç –∏ —Å–æ–∑–¥–∞—Å—Ç –ø–æ—Å—Ç
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç** - –±–æ—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≤–∞—à —Å—Ç–∏–ª—å
3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É** - –±–æ—Ç –∏–∑–≤–ª–µ—á–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —Å–æ–∑–¥–∞—Å—Ç –ø–æ—Å—Ç
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Menu Button "üé® –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∏–ª—å"** - –æ—Ç–∫—Ä–æ–µ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∏–ª—è (—á–µ—Ä–µ–∑ Mini Web App)

**–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å—É**: https://kriistina.netlify.app

- **üìù –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∏–ª—è**: –æ–±—â–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –º–∞–Ω–µ—Ä—ã –ø–∏—Å—å–º–∞
- **üìö –°–ª–æ–≤–∞—Ä—å**: –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ –∏ –∏–∑–±–µ–≥–∞–µ–º—ã–µ —Å–ª–æ–≤–∞  
- **üéØ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: —Ç–æ–Ω, —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç–º–æ–¥–∑–∏
- **üìÑ –ü—Ä–∏–º–µ—Ä—ã**: –æ–±—Ä–∞–∑—Ü—ã –≤–∞—à–∏—Ö –ø–æ—Å—Ç–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è AI

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lambda/           # Lambda —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ webhook/      # –ü—Ä–∏–µ–º webhook –æ—Ç Telegram
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sender/       # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stt/          # Speech-to-Text –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ generator/    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ stepfunctions/    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Step Functions
‚îú‚îÄ‚îÄ webapp/               # Mini Web App
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/   # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx       # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îî‚îÄ‚îÄ migrations/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ template.yaml         # SAM template
‚îî‚îÄ‚îÄ README.md
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ Lambda —Ñ—É–Ω–∫—Ü–∏–π –ª–æ–∫–∞–ª—å–Ω–æ
sam local start-api

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Mini Web App
cd webapp
npm start
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Lambda —Ñ—É–Ω–∫—Ü–∏–π
cd src/lambda/webhook
python -m pytest tests/

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
cd webapp
npm test
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Lambda timeout**: –£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ `template.yaml`
2. **–û—à–∏–±–∫–∏ STT**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞ (<20MB)
3. **RLS –æ—à–∏–±–∫–∏**: –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ auth –≤ Supabase

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Lambda
sam logs -n WebhookFunction --stack-name kriistina-bot

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Step Functions
aws stepfunctions list-executions --state-machine-arn <arn>
```

## üöÄ –î–µ–ø–ª–æ–π

### Production Environment (–ì–û–¢–û–í ‚úÖ)

**–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:**

#### Frontend (Mini Web App):
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Netlify
- **URL**: https://kriistina.netlify.app
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready
- **HTTPS**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω
- **CDN**: ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Netlify

#### Backend (AWS Lambda):
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: AWS (us-east-1)
- **–§—É–Ω–∫—Ü–∏–∏**: WebhookFunction, SenderFunction, STTFunction, GeneratorFunction
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ Deployed
- **API Gateway**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω

#### Database:
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Supabase
- **URL**: https://tucxcwjbexxdepgfzyif.supabase.co
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ Active
- **RLS**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–ø–ª–æ—è

#### Mini Web App:
```bash
cd webapp
npm run build
npx netlify deploy --prod
```

#### AWS Lambda:
```bash
sam build
sam deploy --stack-name kriistina-bot
```

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Production Ready)

1. **‚úÖ Lambda –ø–∞–º—è—Ç—å**: 1024MB –¥–ª—è STT/Generator
2. **‚úÖ AutoScaling**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è concurrent executions
3. **‚úÖ CDN**: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è Mini Web App
4. **‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Supabase —Å –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–æ–º

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- ‚úÖ **CloudWatch –ª–æ–≥–∏**: –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö Lambda
- ‚úÖ **Supabase Dashboard**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Netlify Analytics**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MIT –ª–∏—Ü–µ–Ω–∑–∏—é. –°–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏–∏

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Push –≤ branch
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤!)

## üèóÔ∏è –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    A[üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> B[üì± Telegram Bot]
    A --> C[üåê Mini Web App<br/>kriistina.netlify.app]
    
    B --> D[üîó API Gateway<br/>AWS]
    D --> E[üì° Lambda Webhook]
    E --> F[‚ö° Step Functions]
    
    F --> G[üé§ Lambda STT<br/>Whisper API]
    F --> H[üß† Lambda Generator<br/>GPT-4o]
    F --> I[üì¨ SQS Queue]
    I --> J[üì§ Lambda Sender]
    J --> B
    
    C --> K[üóÑÔ∏è Supabase DB<br/>tucxcwjbexxdepgfzyif.supabase.co]
    H --> K
    
    G --> L[üîä OpenAI Whisper]
    H --> M[ü§ñ OpenAI GPT-4o]
    
    style A fill:#e1f5fe
    style C fill:#c8e6c9
    style K fill:#fff3e0
    style B fill:#f3e5f5
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ Production:

- **üåê Frontend**: React App –Ω–∞ Netlify —Å HTTPS –∏ CDN
- **ü§ñ Telegram Bot**: –ê–∫—Ç–∏–≤–Ω—ã–π –±–æ—Ç —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º webhook
- **‚òÅÔ∏è Backend**: AWS Lambda + Step Functions + SQS
- **üóÑÔ∏è Database**: Supabase PostgreSQL —Å RLS
- **üß† AI Services**: OpenAI GPT-4o + Whisper
- **üîê Security**: HTTPS –≤–µ–∑–¥–µ, —Å–µ–∫—Ä–µ—Ç—ã –≤ AWS Secrets Manager

---

**–í–µ—Ä—Å–∏—è**: 2.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –Ø–Ω–≤–∞—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å**: üöÄ Production Ready & Deployed ‚úÖ  
**Live URL**: https://kriistina.netlify.app 